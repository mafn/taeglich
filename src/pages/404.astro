---
import BaseLayout from "../layouts/BaseLayout.astro";
import type { DayMeta } from "../types";

const metas = import.meta.glob("../days/*/meta.ts", { eager: true });

const days = Object.keys(metas)
  .map((path) => {
    const date = path.split("/").at(-2)!;
    const metaModule = metas[path] as { default: DayMeta };
    return { date, ...metaModule.default };
  })
  .filter((day) => !day.draft)
  .sort((a, b) => b.date.localeCompare(a.date));

const latestDay = days[0]?.date;
---

<BaseLayout title="Not found" renderH1={false}>
  <div class="mx-auto max-w-2xl px-4 py-12">
    <h1 class="text-3xl font-bold tracking-tight text-gray-900">Not found</h1>
    <p class="mt-2 text-gray-600">
      That page doesn’t exist (or it hasn’t been shipped yet).
    </p>

    <div class="mt-8 flex flex-wrap gap-3">
      <a
        href="/today"
        class="rounded-md border border-gray-200 px-3 py-2 font-mono text-sm text-gray-900 hover:border-gray-900"
      >
        today
      </a>
      <a
        href="/archive"
        class="rounded-md border border-gray-200 px-3 py-2 font-mono text-sm text-gray-900 hover:border-gray-900"
      >
        archive
      </a>
      {
        latestDay && (
          <a
            href={`/d/${latestDay}`}
            class="rounded-md border border-gray-200 px-3 py-2 font-mono text-sm text-gray-900 hover:border-gray-900"
          >
            latest ({latestDay})
          </a>
        )
      }
    </div>
  </div>
</BaseLayout>
